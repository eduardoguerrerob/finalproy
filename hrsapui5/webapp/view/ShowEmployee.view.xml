<mvc:View xmlns:core="sap.ui.core" controllerName="egb.hrsapui5.controller.ShowEmployee"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:suite="sap.suite.ui.commons">
    <SplitApp id="splitApp">
        <masterPages>
            <Page showHeader="false">
                <Toolbar class="sapUiSmallMarginTop">
                    <Button icon="sap-icon://nav-back" press="onBack"/>
                    <SearchField liveChange="onSearchEmployee" width="100%"/>
                </Toolbar>
                <List items="{
                    path: 'odataModel>/Users',
                    filters: [
                        {
                            path: 'SapId',
                            operator: 'EQ',
                            value1: 'eduardoguerrerob@gmail.com'
                        }
                    ]
                }" itemPress="onSelectedEmployee">
                    <items>
                        <StandardListItem title="{odataModel>FirstName} {odataModel>LastName}" description="{odataModel>Dni}" type="Active"/>
                    </items>
                </List>
            </Page>
        </masterPages>

        <detailPages>
            <Page id="startPage" showHeader="false">
                <FlexBox justifyContent="Center" alignItems="Center" height="100%">
                    <Text text="{i18n>seleccioneEmpleado}"/>
                </FlexBox>
            </Page>
            <Page id="detailsEmployee" title="{i18n>detalleEmpleado}">
                <ObjectHeader icon= "{= ${odataModel>Type}==='0' ? 'sap-icon://employee-pane' : ${odataModel>Type}==='1' ? 'sap-icon://employee' : 'sap-icon://leads' }" title="{odataModel>FirstName} {odataModel>LastName}" intro="{odataModel>Dni}" class="sapUiResponsivePadding--header" responsive="true">
                    <ObjectAttribute title="{i18n>fechaIngreso}" text="{
                                         path:'odataModel>CreationDate',
                                         type:'sap.ui.model.type.Date'
                                         }"/>
                    <ObjectAttribute title="{i18n>tipo}" text="{= ${odataModel>Type} === '0' ? ${i18n>interno} : ${odataModel>Type} === '1' ? ${i18n>autonomo} : ${i18n>gerente}}" />
                    <ObjectAttribute title="{i18n>comentario}" text="{odataModel>Comments}" />
                </ObjectHeader>
                <IconTabBar class="sapUiResponsiveContentPadding">
                    <items>
                        <IconTabFilter design="Horizontal" icon="sap-icon://attachment" text="{i18n>archivos}">
                            <UploadCollection id="uploadCollection"
                                        maximumFilenameLength="55"
                                        maximumFileSize="10"
                                        multiple="true"
                                        sameFilenameAllowed="true"
                                        instantUpload="true"
                                        uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments"
                                        items="{odataModel>UserToAttachment}"
                                        change="onChangeUploadCollection"
                                        uploadComplete="onUploadComplete"
                                        beforeUploadStarts="onBeforeUploadStarts"
                                        fileDeleted="onFileDeleted"
                                        noDataDescription="{i18n>arrastrarArchivos}"
                                        >
                                    <items>
                                        <UploadCollectionItem 
                                            documentId="{odataModel>AttId}"
                                            visibleEdit="false"
                                            fileName="{odataModel>DocName}"
                                            press="onDownloadFile"
                                            >
                                        
                                        </UploadCollectionItem>
                                    </items>
                            </UploadCollection>
                        </IconTabFilter>

                        <IconTabFilter 
                            icon="sap-icon://money-bills"
                            design="Horizontal"
                            text="{i18n>historia}">
                            <suite:Timeline 
                                enableDoubleSided="true"
								groupByType="Year"
								groupBy="CreationDate"
								showHeaderBar="false"
								enableScroll="false"
								height="100%"
								sortOldestFirst="true"
								content="{odataModel>UserToSalary}">
                                <suite:content>
                                    <suite:TimelineItem 
                                    userName="{parts:[{
                                                        path:'odataModel>Ammount'},
                                                        {path:'odataModel>Waers'}],
												type: 'sap.ui.model.type.Currency',
												formatOptions: {showMeasure: false}}"
										icon="sap-icon://circle-task"
										text="{odataModel>Comments}"
										dateTime="{odataModel>CreationDate}">
                                    
                                    </suite:TimelineItem>
                                </suite:content>
                            </suite:Timeline>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
                <footer>
					<Toolbar>
						<ToolbarSpacer></ToolbarSpacer>
						<Button text="{i18n>darDeBaja}" press="onDeleteEmployee"/>
						<Button text="{i18n>ascender}" press="onRiseEmployee"/>
					</Toolbar>
				</footer>
            </Page>
        </detailPages>
    </SplitApp>
</mvc:View>